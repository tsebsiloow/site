<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="utf-8">
<title>çµ±åˆ ä»®æƒ³ãƒã‚·ãƒ³ ã‚³ãƒ³ã‚½ãƒ¼ãƒ«</title>
<meta name="viewport" content="width=device-width,initial-scale=1">
<link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;600&display=swap" rel="stylesheet">
<style>
/* ==== å…¨ä½“ãƒ†ãƒ¼ãƒ ==== */
:root {
  --bg-dark: #0e1117;
  --panel-dark: #161b22;
  --text-dark: #c9d1d9;
  --accent: #00ffc8;
  --accent2: #0074ff;
  --muted-dark: #8b949e;
  --shadow: rgba(0,0,0,0.6);
  --radius: 10px;
}
[data-theme="light"] {
  --bg-dark: #f5f5f7;
  --panel-dark: #ffffff;
  --text-dark: #111;
  --muted-dark: #555;
  --shadow: rgba(0,0,0,0.1);
}
body {
  font-family: 'JetBrains Mono', monospace;
  background: radial-gradient(circle at 30% 20%, #111 0%, #000 100%);
  color: var(--text-dark);
  padding: 30px;
  margin: 0;
  transition: background 0.3s ease, color 0.3s ease;
}
.wrap {
  max-width: 900px;
  margin: 0 auto;
  background: var(--panel-dark);
  border-radius: var(--radius);
  box-shadow: 0 8px 25px var(--shadow);
  padding: 25px;
  transition: background 0.3s ease, box-shadow 0.3s ease;
}
header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 18px;
}
h1 {
  color: var(--accent);
  font-size: 20px;
  margin: 0;
  letter-spacing: 1px;
}
.theme-toggle {
  background: transparent;
  border: 1px solid var(--accent);
  color: var(--accent);
  padding: 6px 12px;
  border-radius: 6px;
  cursor: pointer;
  font-weight: 600;
  transition: all 0.2s ease;
}
.theme-toggle:hover {
  background: var(--accent);
  color: #000;
}
.status {
  background: rgba(255,255,255,0.05);
  padding: 12px 16px;
  border-radius: var(--radius);
  border: 1px solid rgba(255,255,255,0.1);
  margin-bottom: 12px;
}
.status strong { color: var(--accent); }
.small { font-size: 12px; color: var(--muted-dark); }
.controls {
  display: flex;
  gap: 10px;
  margin: 14px 0;
}
.controls button {
  flex: 1;
  background: linear-gradient(135deg, var(--accent), var(--accent2));
  border: none;
  border-radius: var(--radius);
  color: #000;
  font-weight: 700;
  padding: 10px 14px;
  cursor: pointer;
  box-shadow: 0 3px 8px rgba(0,0,0,0.2);
  transition: all 0.2s ease;
}
.controls button:hover {
  transform: translateY(-1px);
  box-shadow: 0 5px 12px rgba(0,0,0,0.3);
}
.controls button:active { transform: translateY(1px); }
.terminal {
  background: #000;
  color: #00ff90;
  padding: 16px;
  border-radius: var(--radius);
  height: 400px;
  overflow-y: auto;
  font-size: 14px;
  line-height: 1.4;
  border: 1px solid #111;
  box-shadow: inset 0 0 10px rgba(0,255,140,0.15);
  white-space: pre-wrap;
}
.input-row {
  display: flex;
  margin-top: 10px;
  gap: 8px;
}
input[type="text"] {
  flex: 1;
  background: var(--panel-dark);
  color: var(--text-dark);
  border: 1px solid rgba(255,255,255,0.1);
  border-radius: var(--radius);
  padding: 10px;
  font-family: 'JetBrains Mono', monospace;
  transition: border 0.2s ease;
}
input[type="text"]:focus {
  outline: none;
  border-color: var(--accent);
}
button#runBtn {
  background: var(--accent);
  color: #000;
  border: none;
  border-radius: var(--radius);
  padding: 10px 14px;
  font-weight: bold;
  cursor: pointer;
  transition: all 0.2s ease;
}
button#runBtn:hover {
  background: var(--accent2);
  color: #fff;
}
.tip {
  color: var(--muted-dark);
  margin-top: 8px;
  font-size: 12px;
  text-align: center;
}
::-webkit-scrollbar { width: 10px; }
::-webkit-scrollbar-thumb { background: var(--accent); border-radius: 5px; }
.fadeIn { animation: fadeIn 0.4s ease; }
@keyframes fadeIn { from {opacity:0; transform: translateY(8px);} to {opacity:1; transform: translateY(0);} }
</style>
</head>

<body>
<div class="wrap fadeIn">
  <header>
    <h1>ğŸ’» çµ±åˆ ä»®æƒ³ãƒã‚·ãƒ³ ã‚³ãƒ³ã‚½ãƒ¼ãƒ«</h1>
    <button class="theme-toggle" onclick="toggleTheme()">ğŸŒ™ / â˜€</button>
  </header>

  <div class="status">
    ä»®æƒ³ãƒã‚·ãƒ³åï¼š<strong id="vmName">UbuntuVM</strong>ã€€
    çŠ¶æ…‹ï¼š<strong id="vmState" style="color:red">åœæ­¢ä¸­</strong><br>
    <span class="small">ãƒ¦ãƒ¼ã‚¶ãƒ¼: <span id="currentUser">user</span>ã€€ã‚«ãƒ¬ãƒ³ãƒˆ: <span id="cwd">/home/user</span></span>
  </div>

  <div class="controls">
    <button onclick="startVM()">èµ·å‹•</button>
    <button onclick="stopVM()">åœæ­¢</button>
    <button onclick="restartVM()">å†èµ·å‹•</button>
    <button onclick="appendTerminal(helpText)">ãƒ˜ãƒ«ãƒ—</button>
  </div>

  <div id="terminal" class="terminal">
    ä»®æƒ³ãƒã‚·ãƒ³ ã‚¿ãƒ¼ãƒŸãƒŠãƒ« â€” ã‚³ãƒãƒ³ãƒ‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚`startvm` ã§é–‹å§‹ã€‚
  </div>

  <div class="input-row">
    <input id="commandInput" placeholder="ä¾‹: ls, speedgraph live, dashboard start" onkeydown="handleKey(event)" disabled />
    <button id="runBtn" onclick="onRun()" disabled>å®Ÿè¡Œ</button>
  </div>

  <div class="tip">
    Tips: tail -f /var/log/syslog, dashboard start, speedtest, nettop, notify info Hello!
  </div>
</div>

<script>
/* ==============================
   ä»®æƒ³ãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ 
============================== */
const fileSystem = {
  "/": ["home", "var", "etc"],
  "/home": ["user"],
  "/home/user": ["Documents", "Pictures", "notes.txt"],
  "/home/user/Documents": ["project.txt", "todo.md"],
  "/home/user/Pictures": ["screenshot.png", "wallpaper.jpg"],
  "/var": ["log"],
  "/var/log": ["syslog", "kernel.log"],
  "/etc": ["config.sys", "hosts"],
};
let currentPath = "/home/user";

function listDir(path, detailed = false) {
  const files = fileSystem[path] || [];
  if (detailed) {
    return files
      .map(f => `-rw-r--r--  1 user  user  1024  ${new Date().toLocaleDateString()}  ${f}`)
      .join("\n");
  }
  return files.join("  ");
}
function changeDir(dir) {
  if (!dir) return "ç§»å‹•å…ˆã‚’æŒ‡å®šã—ã¦ãã ã•ã„ã€‚";
  if (dir === "..") {
    if (currentPath === "/") return "/";
    currentPath = currentPath.split("/").slice(0, -1).join("/") || "/";
  } else {
    const newPath = dir.startsWith("/") ? dir : (currentPath === "/" ? `/${dir}` : `${currentPath}/${dir}`);
    if (fileSystem[newPath]) {
      currentPath = newPath;
    } else {
      return `ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãŒå­˜åœ¨ã—ã¾ã›ã‚“: ${dir}`;
    }
  }
  updateCwd();
  return "";
}
function getCurrentPath() { return currentPath; }
function readFile(path) {
  if (!path) return "ä½¿ç”¨æ³•: cat <ãƒ•ã‚¡ã‚¤ãƒ«å>";
  const fullPath = path.startsWith("/") ? path : `${currentPath}/${path}`;
  const parts = fullPath.split("/");
  const fileName = parts.pop();
  const dirPath = parts.join("/") || "/";
  if (!fileSystem[dirPath] || !fileSystem[dirPath].includes(fileName))
    return `ãƒ•ã‚¡ã‚¤ãƒ«ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“: ${path}`;
  const examples = {
    "notes.txt": "ã“ã‚Œã¯ä»®æƒ³Linuxç’°å¢ƒã®ãƒ¡ãƒ¢ãƒ•ã‚¡ã‚¤ãƒ«ã§ã™ã€‚",
    "project.txt": "Project Alpha â€” é–‹ç™ºä¸­",
    "syslog": "[INFO] ä»®æƒ³ã‚·ã‚¹ãƒ†ãƒ èµ·å‹•å®Œäº†",
    "kernel.log": "[BOOT] Kernel loaded OK",
  };
  return examples[fileName] || `${fileName}: ç©ºã®ãƒ•ã‚¡ã‚¤ãƒ«ã§ã™ã€‚`;
}
function handleFSCommand(cmd, args) {
  switch (cmd) {
    case "ls": return listDir(getCurrentPath(), args.includes("-l"));
    case "cd": return changeDir(args[0] || "/");
    case "cat": return readFile(args[0]);
    default: return null;
  }
}

/* ==============================
   ã‚¿ãƒ¼ãƒŸãƒŠãƒ«æœ¬ä½“
============================== */
let vmRunning = false;
const terminal = document.getElementById("terminal");
const vmState = document.getElementById("vmState");
const input = document.getElementById("commandInput");
const runBtn = document.getElementById("runBtn");
const helpText = "ä½¿ç”¨å¯èƒ½ã‚³ãƒãƒ³ãƒ‰ä¾‹:\nhelp, ls, cd, cat, speedtest, dashboard start, notify info Hello!";

function updateCwd(){ document.getElementById("cwd").textContent = getCurrentPath(); }
function appendTerminal(text){ terminal.textContent += "\n" + text; terminal.scrollTop = terminal.scrollHeight; }
function setCommandEnabled(e){ input.disabled=!e; runBtn.disabled=!e; }

function startVM(){ if(vmRunning)return appendTerminal("VMã¯ã™ã§ã«èµ·å‹•ä¸­ã€‚"); vmRunning=true; vmState.textContent="ç¨¼åƒä¸­"; vmState.style.color="lime"; appendTerminal("ä»®æƒ³ãƒã‚·ãƒ³ã‚’èµ·å‹•ã—ã¾ã—ãŸã€‚"); setCommandEnabled(true); }
function stopVM(){ if(!vmRunning)return appendTerminal("VMã¯åœæ­¢ä¸­ã§ã™ã€‚"); vmRunning=false; vmState.textContent="åœæ­¢ä¸­"; vmState.style.color="red"; appendTerminal("ä»®æƒ³ãƒã‚·ãƒ³ã‚’åœæ­¢ã—ã¾ã—ãŸã€‚"); setCommandEnabled(false); }
function restartVM(){ if(!vmRunning)return appendTerminal("åœæ­¢ä¸­ã§ã™ã€‚"); appendTerminal("å†èµ·å‹•ä¸­..."); setTimeout(()=>appendTerminal("å†èµ·å‹•å®Œäº†ã€‚"),1000); }

function handleKey(e){ if(e.key==="Enter") onRun(); }
function onRun(){ const v=input.value.trim(); if(!v)return; appendTerminal("> "+v); input.value=""; runCommand(v); }

function runCommand(line){
  if(!vmRunning)return appendTerminal("startvm ã§èµ·å‹•ã—ã¦ãã ã•ã„ã€‚");
  const [cmd,...args]=line.trim().split(" ");
  const fsOut=handleFSCommand(cmd,args);
  if(fsOut!==null){ appendTerminal(fsOut); updateCwd(); return; }
  switch(cmd){
    case "help": appendTerminal(helpText); break;
    case "startvm": startVM(); break;
    case "stopvm": stopVM(); break;
    case "restartvm": restartVM(); break;
    case "speedtest": appendTerminal("Speedtest...\nPing: 20ms\nDownload: 92.3 Mbps\nUpload: 31.2 Mbps"); break;
    case "dashboard": appendTerminal("ğŸ“Š ä»®æƒ³ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰èµ·å‹•ä¸­... CPU:42% MEM:61%"); break;
    case "notify": appendTerminal("ğŸ”” é€šçŸ¥é€ä¿¡: "+args.join(" ")); break;
    default: appendTerminal("ã‚³ãƒãƒ³ãƒ‰ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“: "+cmd);
  }
}
function toggleTheme(){
  const cur=document.documentElement.getAttribute("data-theme")||"dark";
  const next=cur==="light"?"dark":"light";
  document.documentElement.setAttribute("data-theme",next);
}
appendTerminal("çµ±åˆã‚¿ãƒ¼ãƒŸãƒŠãƒ« åˆæœŸåŒ–å®Œäº† â€” 'startvm' ã‚’å…¥åŠ›ã—ã¦é–‹å§‹ã€‚");
</script>
</body>
</html>
